NAME = push_swap
NAME_BONUS = checker

UTILS_DIR = utils
ALGO_SORT_DIR = sort_algo
LIBFT_DIR = libft
CHECKER_DIR = check
OBJ_DIR = objs
OBJ_DIR_BONUS = objs_bonus

SOURCE = $(wildcard $(UTILS_DIR)/*.c) $(wildcard $(ALGO_SORT_DIR)/*.c) \
		 $(wildcard $(LIBFT_DIR)/*.c) main.c push_swap.c
SOURCE_BONUS = $(wildcard **/*.c) main_check.c push_swap.c

OBJS = $(SOURCE:%.c=$(OBJ_DIR)/%.o)
OBJS_BONUS = $(SOURCE_BONUS:%.c=$(OBJ_DIR_BONUS)/%.o)

RM = rm
CC = cc
AR = ar
MAKE_DIR = mkdir

RM_FLAG = -rf
CC_FLAG = -Wall -Wextra -Werror
AR_FLAG = -rcs

ARGS = 170 253 362 149 43 25 470 68 486 383 157 471 163 459 83 479 363 199 440 461 10 339 385 30 88 182 387 398 236 58 352 164 162 4 399 94 256 423 79 260 458 462 110 20 133 353 310 377 437 255 245 171 156 154 212 136 366 336 251 214 425 167 483 207 436 280 419 197 17 73 78 123 24 200 464 38 74 302 246 265 225 293 47 232 410 51 273 376 62 342 391 428 13 134 65 278 35 334 132 355 222 388 284 98 466 435 297 491 361 31 401 37 45 394 359 463 46 105 344 69 431 11 395 23 113 465 417 307 238 261 26 150 379 159 262 215 137 389 448 357 218 186 317 475 429 57 166 177 474 217 416 14 226 497 354 314 192 478 165 281 409 22 96 102 482 364 198 205 104 54 283 107 56 276 39 183 347 414 415 64 140 9 27 384 250 313 303 153 254 172 386 70 114 298 407 456 373 304 242 213 488 468 469 187 139 21 203 61 331 441 426 229 176 271 449 380 131 6 268 16 142 129 325 330 348 420 152 158 120 66 19 499 146 378 130 370 443 311 180 424 161 485 421 324 500 206 487 473 400 174 151 231 327 452 160 438 41 343 15 477 277 495 40 308 239 86 447 434 141 374 286 274 315 292 381 55 28 259 296 103 346 59 493 188 433 337 93 450 275 446 454 299 85 82 432 263 241 87 287 233 332 288 439 481 75 60 184 32 264 71 42 144 467 392 365 175 358 494 321 244 119 201 148 147 118 480 489 411 76 8 266 457 272 234 340 108 300 122 101 294 52 196 63 116 36 124 403 178 484 295 247 72 372 257 12 95 430 326 309 252 290 341 451 406 204 368 248 84 106 191 289 99 228 195 190 328 209 320 100 422 455 460 127 208 125 97 155 404 397 305 7 115 224 216 369 81 345 128 223 402 396 444 179 240 351 243 53 322 371 285 269 173 249 29 1 227 453 89 323 181 496 282 49 291 126 121 80 412 2 202 193 258 169 360 18 109 413 67 316 92 111 210 498 77 220 168 221 306 318 230 117 408 472 279 418 329 5 476 301 91 442 350 33 338 492 34 237 194 90 490 427 143 112 50 145 405 375 135 356 185 349 235 219 267 445 270 382 319 335 138 312 390 333 189 3 211 44 367 48 393 

all: $(NAME)

$(NAME): $(OBJ_DIR) $(OBJS)
	$(CC) $(CC_FLAG) -o $@ $(OBJS)

clean:
	$(RM) $(RM_FLAG) $(OBJ_DIR) $(OBJ_DIR_BONUS)

fclean: clean
	$(RM) $(RM_FLAG) $(NAME) $(NAME_BONUS)

re: fclean all

gen_exe: re
	./$(NAME) $(ARGS) | ./checker_Mac $(ARGS)

bonus: $(NAME_BONUS)

re_bonus: fclean bonus
	
gen_exe_bonus: re_bonus
	./$(NAME_BONUS) $(ARGS)

$(NAME_BONUS): $(OBJ_DIR_BONUS) $(OBJS_BONUS)
	$(CC) $(CC_FLAG) -o $@ $(OBJS_BONUS)

$(OBJ_DIR)/%.o: %.c
	$(CC) -c $< -o $@

$(OBJ_DIR_BONUS)/%.o: %.c
	$(CC) -c $< -o $@

$(OBJ_DIR):
	$(MAKE_DIR) $(OBJ_DIR)
	$(MAKE_DIR) $(OBJ_DIR)/$(UTILS_DIR)
	$(MAKE_DIR) $(OBJ_DIR)/$(ALGO_SORT_DIR)
	$(MAKE_DIR) $(OBJ_DIR)/$(LIBFT_DIR)

$(OBJ_DIR_BONUS):
	$(MAKE_DIR) $(OBJ_DIR_BONUS)
	$(MAKE_DIR) $(OBJ_DIR_BONUS)/$(UTILS_DIR)
	$(MAKE_DIR) $(OBJ_DIR_BONUS)/$(ALGO_SORT_DIR)
	$(MAKE_DIR) $(OBJ_DIR_BONUS)/$(LIBFT_DIR)
	$(MAKE_DIR) $(OBJ_DIR_BONUS)/$(CHECKER_DIR)

.PHONY: all clean fclean re