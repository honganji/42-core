NAME = push_swap
NAME_BONUS = checker

UTILS_DIR = utils
ALGO_SORT_DIR = sort_algo
LIBFT_DIR = libft
CHECKER_DIR = check
OBJ_DIR = objs
OBJ_DIR_BONUS = objs_bonus

SOURCE = $(wildcard $(UTILS_DIR)/*.c) $(wildcard $(ALGO_SORT_DIR)/*.c) \
		 $(wildcard $(LIBFT_DIR)/*.c) main.c push_swap.c
SOURCE_BONUS = $(wildcard **/*.c) main_check.c push_swap.c

OBJS = $(SOURCE:%.c=$(OBJ_DIR)/%.o)
OBJS_BONUS = $(SOURCE_BONUS:%.c=$(OBJ_DIR_BONUS)/%.o)

RM = rm
CC = cc
AR = ar
MAKE_DIR = mkdir

RM_FLAG = -rf
CC_FLAG = -Wall -Wextra -Werror
AR_FLAG = -rcs

ARGS = 384 454 22 52 399 312 23 159 166 479 395 9 127 72 377 65 107 338 91 461 412 88 76 417 203 182 204 264 350 57 129 366 343 83 155 494 274 358 15 219 341 244 20 336 217 376 451 351 148 178 5 489 158 223 327 187 92 425 181 141 370 320 239 106 121 449 420 39 205 329 11 172 80 87 8 269 96 112 334 97 231 197 400 73 156 222 335 120 151 291 353 2 133 149 496 476 324 119 69 444 246 194 211 423 188 199 235 174 44 24 60 355 318 58 302 132 262 30 12 275 474 380 50 266 55 315 64 383 443 482 136 66 270 162 252 189 483 337 31 93 195 333 116 137 1 298 441 445 114 46 160 17 82 356 409 102 202 283 349 212 34 77 213 373 442 126 7 171 169 361 340 90 405 167 18 253 230 500 138 437 183 487 402 433 272 209 68 196 301 108 314 450 21 328 130 131 105 354 198 382 321 466 284 191 453 258 163 470 322 214 465 243 59 75 289 362 499 406 416 101 147 279 485 150 215 394 393 319 122 439 128 456 94 225 309 282 431 228 170 430 339 261 85 469 249 256 448 348 446 495 227 386 125 242 311 192 61 458 411 236 111 372 381 98 84 459 371 299 71 70 323 42 135 89 346 292 139 176 273 498 208 177 113 185 14 255 378 47 19 293 51 421 280 397 165 229 16 257 313 35 180 144 260 123 103 38 184 201 110 484 379 154 49 62 478 247 278 6 164 464 424 286 115 145 74 288 45 463 455 347 206 304 404 152 67 414 310 308 43 168 221 48 250 100 79 190 419 226 492 438 363 407 200 251 294 41 477 179 365 413 56 104 434 375 374 193 305 173 307 210 3 140 480 410 426 392 153 220 27 432 281 290 300 436 467 32 238 99 452 418 295 175 287 265 29 429 331 359 118 364 297 143 234 233 385 440 369 306 161 241 207 218 391 237 240 95 427 157 457 471 268 78 387 403 40 345 325 491 86 360 497 493 473 344 25 475 37 263 271 390 368 488 245 398 63 490 332 109 296 435 316 259 4 124 54 146 317 53 415 326 389 481 134 10 447 26 330 216 396 117 460 248 276 408 367 472 428 13 28 388 224 254 303 232 401 357 285 142 33 468 422 36 352 462 186 486 277 267 81 342 

all: $(NAME)

$(NAME): $(OBJ_DIR) $(OBJS)
	$(CC) $(CC_FLAG) -o $@ $(OBJS)

clean:
	$(RM) $(RM_FLAG) $(OBJ_DIR) $(OBJ_DIR_BONUS)

fclean: clean
	$(RM) $(RM_FLAG) $(NAME) $(NAME_BONUS)

re: fclean all

gen_exe: re
	./$(NAME) $(ARGS) | ./checker_Mac $(ARGS)

bonus: $(NAME_BONUS)

re_bonus: fclean bonus
	
gen_exe_bonus: re_bonus
	./$(NAME_BONUS) $(ARGS)

$(NAME_BONUS): $(OBJ_DIR_BONUS) $(OBJS_BONUS)
	$(CC) $(CC_FLAG) -o $@ $(OBJS_BONUS)

$(OBJ_DIR)/%.o: %.c
	$(CC) -c $< -o $@

$(OBJ_DIR_BONUS)/%.o: %.c
	$(CC) -c $< -o $@

$(OBJ_DIR):
	$(MAKE_DIR) $(OBJ_DIR)
	$(MAKE_DIR) $(OBJ_DIR)/$(UTILS_DIR)
	$(MAKE_DIR) $(OBJ_DIR)/$(ALGO_SORT_DIR)
	$(MAKE_DIR) $(OBJ_DIR)/$(LIBFT_DIR)

$(OBJ_DIR_BONUS):
	$(MAKE_DIR) $(OBJ_DIR_BONUS)
	$(MAKE_DIR) $(OBJ_DIR_BONUS)/$(UTILS_DIR)
	$(MAKE_DIR) $(OBJ_DIR_BONUS)/$(ALGO_SORT_DIR)
	$(MAKE_DIR) $(OBJ_DIR_BONUS)/$(LIBFT_DIR)
	$(MAKE_DIR) $(OBJ_DIR_BONUS)/$(CHECKER_DIR)

.PHONY: all clean fclean re